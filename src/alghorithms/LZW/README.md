# Алгоритм LZW (Lempel-Ziv-Welch)

Алгоритм LZW — это словарный метод сжатия данных без потерь, разработанный в 1984 году Терри Велчем на основе работ Лемпеля и Зива (LZ77 и LZ78). Он широко используется в форматах GIF, TIFF и некоторых архиваторах.

---

## Основная идея алгоритма

Алгоритм LZW заменяет повторяющиеся последовательности символов на более короткие коды. Он строит словарь (таблицу) строк на лету во время сжатия и использует его для кодирования данных. Цель — уменьшить размер данных за счет замены часто встречающихся подстрок на короткие коды.

---

## Как работает сжатие (кодирование)

1. **Инициализация словаря**:
   - Словарь инициализируется всеми возможными односимвольными строками. Например, для ASCII это 256 символов (коды 0–255).

2. **Поиск повторяющихся подстрок**:
   - Алгоритм проходит по входным данным и ищет самую длинную подстроку, которая уже есть в словаре.
   - Если подстрока найдена, она добавляется к текущей строке, и поиск продолжается.
   - Если подстрока не найдена, текущая строка добавляется в словарь, а её код записывается в выходной поток.

3. **Обновление словаря**:
   - Каждая новая подстрока добавляется в словарь с новым уникальным кодом.

4. **Запись кодов**:
   - Коды, соответствующие найденным подстрокам, записываются в выходной поток.

---

## Как работает распаковка (декодирование)

1. **Инициализация словаря**:
   - Словарь инициализируется так же, как при сжатии (односимвольные строки).

2. **Чтение кодов**:
   - Алгоритм читает коды из сжатых данных и ищет соответствующие строки в словаре.

3. **Восстановление данных**:
   - Если код найден в словаре, соответствующая строка добавляется к выходным данным.
   - Если код отсутствует в словаре, строка восстанавливается на основе предыдущих данных.

4. **Обновление словаря**:
   - Во время декодирования словарь обновляется, добавляя новые строки.

---

## Пример работы

### Входные данные: `"TOBEORNOTTOBEORTOBEORNOT"`

1. **Сжатие**:
   - Словарь инициализируется односимвольными строками: `T`, `O`, `B`, `E`, `R`, `N`.
   - Алгоритм находит подстроки:
     - `TO` → добавляется в словарь с кодом 256.
     - `OB` → добавляется в словарь с кодом 257.
     - и так далее.
   - Выходные коды: `[84, 79, 66, 69, 79, 82, 78, 79, 84, 256, 258, 260, 265, 259, 261, 264]`.

2. **Распаковка**:
   - Словарь инициализируется так же, как при сжатии.
   - Коды декодируются в строки:
     - `84` → `T`.
     - `79` → `O`.
     - и так далее.
   - Выходные данные: `"TOBEORNOTTOBEORTOBEORNOT"`.

---

## Преимущества алгоритма LZW

1. **Простота реализации**: Алгоритм легко реализовать, и он не требует сложных вычислений.
2. **Адаптивность**: Словарь строится на лету, что позволяет алгоритму адаптироваться к данным.
3. **Эффективность для повторяющихся данных**: LZW хорошо работает с данными, содержащими много повторяющихся последовательностей (текст, изображения с паттернами).

---

## Недостатки алгоритма LZW

1. **Размер словаря**: Словарь может быстро расти, особенно для больших объемов данных.
2. **Неэффективность для случайных данных**: Если данные не содержат повторяющихся последовательностей, LZW может увеличить размер данных.
3. **Патентные ограничения**: В прошлом алгоритм был защищен патентами (сейчас патенты истекли).

---

## Применение LZW

- **Сжатие изображений**: Форматы GIF и TIFF используют LZW для сжатия данных.
- **Архивация**: Некоторые архиваторы используют LZW как часть своих алгоритмов.
- **Текстовые данные**: LZW эффективен для сжатия текстов с повторяющимися словами или фразами.

---

## Заключение

Алгоритм LZW — это мощный и универсальный метод сжатия данных, который хорошо подходит для задач, где важны скорость и простота реализации. Его эффективность зависит от характера данных: для повторяющихся паттернов он работает отлично, а для случайных данных может быть неэффективен.